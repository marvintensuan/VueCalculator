<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <style>
      section {
        display: flex;
        flex-wrap: wrap;
        font-family: Calibri;
      }
      #calc-body {
        display: flex;
        flex-direction: column;
        padding: 0.5vw;
        border: 1px solid;
        border-radius: 10px;
        max-width: 480px;
      }

      #calc-results {
        flex-direction: column;
        padding: 0.5vh;
        margin-bottom: 1rem;
        font-family: 'Courier New';
        background-color: #d3d3d3;
        border: 1px solid;
        align-items: flex-end;
      }

      #btn-numbers {
        display: flex;
        flex-wrap: wrap;
        width: 250px;
        background-color: pink;
      }

      #btn-ops {
        display: flex;
        flex-wrap: wrap;
        flex-direction: column;
        background-color: cyan;
      }

      button.button {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        margin: 10px;
        border: 1px solid;
        border-radius: 50%;
        /* min-width: 20%; */
        width: 60px;
        height: 60px;
      }

      button.button:hover {
        background-color: gray;
      }

      button.button:active {
        background-color: white;
      }

    </style>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  </head>
  <body>
    <div id="app">
      <div id="calc-body">
        <section id="calc-results">
          <div id="results-expr">
            {{ inputString ? inputString : "0"  }}
          </div>
          <div id="results-eval">
            {{ result }}
          </div>
        </section>
        <section>
          <div id="btn-numbers">
            <button class="button" @click="getTextContent">7</button>
            <button class="button" @click="getTextContent">8</button>
            <button class="button" @click="getTextContent">9</button>
            <button class="button" @click="getTextContent">4</button>
            <button class="button" @click="getTextContent">5</button>
            <button class="button" @click="getTextContent">6</button>
            <button class="button" @click="getTextContent">1</button>
            <button class="button" @click="getTextContent">2</button>
            <button class="button" @click="getTextContent">3</button>
            <button class="button" @click="clearAll">C</button>
            <button class="button" @click="getTextContent">0</button>
            <button class="button">=</button>
          </div>
          <div id="btn-ops">
            <button class="button" @click="appendOperation">&plus;</button>
            <button class="button" @click="appendOperation">&minus;</button>
            <button class="button" @click="appendOperation">&times;</button>
            <button class="button" @click="appendOperation">&divide;</button>
          </div>
        </section>
      </div>
      <script>
        const { createApp } = Vue

        createApp({
          methods: {
            getTextContent(event) {
              let textContent = event.target.textContent
              this.inputString += textContent
            },
            appendOperation(event) {
              
              const ops = ['+', '−', '×', '÷']
              
              let textContent = event.target.textContent
              let lastChar = this.inputString.at(-1)

              if (lastChar === undefined) {
                return
              }

              if (ops.indexOf(lastChar) !== -1) {
                this.inputString = this.inputString.slice(0, -1)
              }

              this.inputString += textContent
            },
            clearAll() {
              this.inputString = ""
            }
          },
          data() {
            return {
              inputString: "",
              result: 0
            }
          }
        }).mount('#app')
      </script>
    </div>
  </body>
</html>
